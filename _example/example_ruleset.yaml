# Ruleset for validating util imports
# This doesn't actually do anything with containers
# Allowed scopes: output, buildtime
# Allowed categories: negative, positived
# Allowed target: command, os, fs

rules:
  - scope: output
    category: Negative
    instruction: |
      depth = command_util.get_ast_depth()
      print(command_util.get_stage_node_at(0).name)
      assert(all([command_util.get_stage_node_at(index).name > 0 for index in range(depth)]))
    description: Ensure all stages are named
    id: stage_name
    target: command

